# ===================================================================
# Mol-Dorm é¡¹ç›®å…¬å…±åŸºç¡€é…ç½®æ–‡ä»¶ (Pig é£æ ¼æŠ½ç¦»)
# åŒ…å«ï¼šæ•°æ®åº“ã€Redis(å¸¦å¯†ç )ã€MyBatis-Plusã€Sa-Token åŸºç¡€è®¾å®š
# ===================================================================

spring:
  # 1. æ•°æ®åº“è¿æ¥æ± é€šç”¨é…ç½®
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    # url: æ³¨æ„ serverTimezone å¿…é¡»æŒ‡å®šï¼ˆAsia/Shanghaiï¼‰ï¼Œå¦åˆ™ Java å†™å…¥æ—¶é—´å¯èƒ½ä¸æ•°æ®åº“å·® 8 å°æ—¶
    url: jdbc:mysql://localhost:3306/mol-dorm?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root
    password: 123456              # è¯·åœ¨æ­¤å¤„å¡«å…¥ä½ çš„ MySQL å¯†ç 
    hikari:
      minimum-idle: 5             # æœ€å°ç©ºé—²è¿æ¥æ•°
      maximum-pool-size: 20       # æœ€å¤§è¿æ¥æ± æ•°é‡
      idle-timeout: 30000         # è¿æ¥ç©ºé—²è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      connection-timeout: 30000   # ç­‰å¾…è¿æ¥æ± åˆ†é…è¿æ¥çš„æœ€å¤§æ—¶é•¿

  # 2. Redis æ ¸å¿ƒé…ç½®(Sa-Token å’Œ ç¼“å­˜ å¼ºä¾èµ–)
  data:
    redis:
      host: localhost             # Redis æœåŠ¡å™¨åœ°å€
      port: 6379                  # Redis ç«¯å£
      password: a1b2c3            # åœ¨è¿™é‡Œå¡«å…¥ä½ çš„æœ¬åœ° Redis å¯†ç 
      database: 1                 # Redisæ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ä¸º0ï¼‰ï¼Œæ¨èä½¿ç”¨ 1 å·åº“ï¼Œä¸ç³»ç»Ÿç¼“å­˜åˆ†å¼€
      timeout: 5000ms             # è¿æ¥è¶…æ—¶æ—¶é—´
      lettuce:
        pool:
          max-active: 20          # æœ€å¤§å¹¶å‘è¿æ¥æ•°ï¼Œä¹Ÿæ˜¯è¿æ¥æ± æœ€å¤§è¿æ¥æ•°
          max-idle: 10            # æœ€å¤§ç©ºé—²è¿æ¥
          min-idle: 2             # æœ€å°ç©ºé—²è¿æ¥

  # 3. å…¨å±€ JSON åºåˆ—åŒ–é…ç½® (Jackson)
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss    # å‰ç«¯æ¥æ”¶åˆ°çš„æ—¥æœŸæ ¼å¼
    time-zone: GMT+8                    # å¼ºåˆ¶ä½¿ç”¨ä¸œå…«åŒºæ—¶é—´

# ===================================================================
# MyBatis-Plus å…¨å±€é…ç½®
# ===================================================================
mybatis-plus:
  global-config:
    db-config:
      id-type: assign_id                    # ä¸»é”®ç­–ç•¥ï¼šè‡ªåŠ¨åˆ†é…é›ªèŠ±ç®—æ³• ID (é€‚åˆåˆ†å¸ƒå¼)
      # ç”±äºç§»é™¤äº† logic-delete ç›¸å…³é…ç½®ï¼Œç°åœ¨è°ƒç”¨ removeById å°±æ˜¯çœŸå®çš„ DELETE è¯­å¥
  configuration:
    map-underscore-to-camel-case: true      # è‡ªåŠ¨å¼€å¯é©¼å³°å‘½åè½¬æ¢ (æ•°æ®åº“ a_column -> å®ä½“ç±» aColumn)
    cache-enabled: false                    # ç¦ç”¨ MyBatis ä¸€çº§ç¼“å­˜ï¼Œé¿å…åˆ†å¸ƒå¼ç¯å¢ƒä¸‹äº§ç”Ÿè„æ•°æ®

# ===================================================================
# Sa-Token æƒé™åŸºç¡€é…ç½®(å‰åç«¯åˆ†ç¦»/App ä¸“ç”¨ç‰ˆ)
# ===================================================================
sa-token:
  # 1. Token åç§° (å‰ç«¯ Header ä¼ å‚çš„ key)
  # ğŸŸ¢ å‰ç«¯è¯·æ±‚å¤´å¿…é¡»å¸¦è¿™ä¸ª Keyï¼Œä¾‹å¦‚ -> mol-token: xxxxx-xxxx-xxxx
  token-name: mol-token

  # 2. Token æœ‰æ•ˆæœŸ (é»˜è®¤ 2å°æ—¶)
  # ä»£ç ä¸­"è®°ä½æˆ‘"ä¼šè¦†ç›–æ­¤æ—¶é—´ (7å¤©)ï¼Œæœªå‹¾é€‰"è®°ä½æˆ‘"åˆ™ä½¿ç”¨æ­¤æ—¶é—´
  timeout: 7200

  # 3. ä¸´æ—¶æœ‰æ•ˆæœŸ (30åˆ†é’Ÿæ— æ“ä½œè‡ªåŠ¨æ‰çº¿)
  active-timeout: 1800

  # 4. å¹¶å‘ç™»å½•è®¾ç½®
  # ğŸŸ¢ è®¾ä¸º trueï¼Œé…åˆä»£ç ä¸­çš„ device å‚æ•°ï¼Œå®ç°"åŒç«¯äº’æ–¥ï¼Œå¼‚ç«¯å…±å­˜"
  # (å³ï¼šæ‰‹æœºå’Œç”µè„‘å¯ä»¥åŒæ—¶åœ¨çº¿ï¼Œä½†æ–°ç”µè„‘ç™»å½•ä¼šæŒ¤æ‰æ—§ç”µè„‘)
  is-concurrent: true
  is-share: true                  # å…è®¸è´¦å·å¤šåœ°åŒæ—¶ç™»å½•

  # 5. Token é£æ ¼
  token-style: uuid               # ç®€å• UUID

  # 6. æ—¥å¿—å¼€å…³
  is-log: false                   # ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­
  is-print: false                 # å…³é—­å¯åŠ¨å­—ç¬¦ç”»

  # ğŸŸ¢ [æ ¸å¿ƒ] å‰åç«¯åˆ†ç¦»/æ— Cookieæ¨¡å¼é…ç½® ğŸŸ¢
  is-read-cookie: false           # å…³é—­ Cookie è¯»å– (é˜²æ­¢æµè§ˆå™¨è‡ªåŠ¨å¸¦ Cookie å¹²æ‰°åˆ¤æ–­)
  is-read-body: false             # å…³é—­ Body è¯»å– (è§„èŒƒæ€§)
  is-read-head: true              # å¼ºåˆ¶ä» Header è¯»å– Token

# "è®°ä½æˆ‘" çš„æœ‰æ•ˆæœŸ (Remember Me)
  # ä¾‹å¦‚ 7 å¤© (604800ç§’)
  # æˆ‘ä»¬ä¸åœ¨é…ç½®æ–‡ä»¶é‡Œå†™æ­»ï¼Œè€Œæ˜¯åœ¨ä»£ç é‡ŒåŠ¨æ€è®¾ç½®ï¼Œä½†è¿™é‡Œåšä¸ªå¤‡æ³¨

# ===================================================================
# Mol ä¸šåŠ¡è‡ªå®šä¹‰å…¨å±€é…ç½® (ä¸‹æ²‰åˆ° Baseï¼Œæ‰€æœ‰æ¨¡å—å¯è§)
# ===================================================================
mol:
  security:
    # æ˜¯å¦å¼€å¯"åˆå§‹å¯†ç å¼ºåˆ¶ä¿®æ”¹"åŠŸèƒ½ (AuthServiceImpl ä¸­ç”¨åˆ°)
    # true: ç™»å½•æ—¶æ£€æŸ¥ is_initial_pwdï¼Œå¦‚æœæ˜¯ 1 åˆ™æç¤ºå¿…é¡»æ”¹å¯†
    force-change-pwd: true

  # æ–‡ä»¶å­˜å‚¨è·¯å¾„ (Windows/Linux)
  # ğŸŸ¢ ä¿®å¤ Maven æµ‹è¯•æŠ¥é”™çš„æ ¸å¿ƒï¼šè®© Server æ¨¡å—ä¹Ÿèƒ½è¯»åˆ°è¿™ä¸ªå€¼
  profile: D:/mol/uploadPath
# ===================================================================
# Knife4j 4.x å…¬å…± UI å¢å¼ºé…ç½®
# ===================================================================
knife4j:
  enable: true            # å¼€å¯ Knife4j å¢å¼º UI ç•Œé¢ (doc.html)
  setting:
    language: zh_cn       # ç•Œé¢è¯­è¨€ï¼šä¸­æ–‡
    enable-swagger-models: true   # ç•Œé¢æ˜¾ç¤ºæ–‡æ¡£æ¨¡å‹
    enable-reload-cache-parameter: true   # å…è®¸åœ¨ç•Œé¢åˆ·æ–°æ—¶ä¿ç•™å‚æ•°ç¼“å­˜

